<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immersive STEM Platform</title>
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="/index.css">
<script type="importmap">
{
  "imports": {
    "url": "https://aistudiocdn.com/url@^0.11.4",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.24.0",
    "vite": "https://aistudiocdn.com/vite@^7.1.9",
    "three/": "https://aistudiocdn.com/three@^0.180.0/",
    "three": "https://aistudiocdn.com/three@^0.180.0",
    "path": "https://aistudiocdn.com/path@^0.12.7",
    "firebase/": "https://aistudiocdn.com/firebase@^12.4.0/"
  }
}
</script>
</head>
<body>
    <div id="auth-page" class="page active">
        <div class="auth-container">
            <div class="auth-visual">
                <div class="logo">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 21v-1.5M15.75 3v1.5M12 4.5v15m5.25-15h1.5m-1.5 18h1.5M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z" />
                    </svg>
                    <span>Insight XR</span>
                </div>
                <h1 id="auth-visual-title">An immersive gateway to science.</h1>
                <p id="auth-visual-subtitle">Experience interactive simulations, personalized quizzes, and AI-powered tutoring to master complex subjects.</p>
            </div>
            <div class="auth-form-wrapper">
                <div class="auth-header-mobile">
                    <div class="logo">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 21v-1.5M15.75 3v1.5M12 4.5v15m5.25-15h1.5m-1.5 18h1.5M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z" />
                        </svg>
                        <span>Insight XR</span>
                    </div>
                    <p>An immersive gateway to science.</p>
                </div>
                <div class="auth-card">
                    <div class="social-login-options">
                        <button class="social-btn google-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path><path d="M1 1h22v22H1z" fill="none"></path></svg>
                            <span>Continue with Google</span>
                        </button>
                    </div>
                    <div class="divider"><span>OR</span></div>
                    <div class="auth-tabs">
                        <button id="auth-tab-signin" class="auth-tab-button active">Sign In</button>
                        <button id="auth-tab-signup" class="auth-tab-button">Sign Up</button>
                    </div>
                    <form id="auth-form">
                        <div class="input-group">
                            <label for="auth-email">Email</label>
                            <div class="input-wrapper">
                                 <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                                <input type="email" id="auth-email" required autocomplete="email" placeholder="you@example.com">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="auth-password">Password</label>
                            <div class="input-wrapper">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                                <input type="password" id="auth-password" required autocomplete="current-password" minlength="6" placeholder="••••••••">
                                <button type="button" id="password-toggle-button" class="password-toggle-btn" aria-label="Show password">
                                    <svg class="icon-eye" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                    <svg class="icon-eye-off hidden" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>
                                </button>
                            </div>
                        </div>
                        <p id="auth-error" class="auth-error"></p>
                        <button type="submit" id="auth-submit-button" class="start-experiment-button">Sign In</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <main class="main-content" style="display: none;">
        <!-- HOME PAGE -->
        <div id="home-page" class="page">
            <header class="page-header">
                <h1 id="welcome-header">Good morning, Sarah!</h1>
                <p>Continue your STEM journey</p>
            </header>
            <section class="page-section">
                <h2>Quick Actions</h2>
                <div class="quick-actions-grid">
                    <div id="quiz-action-card" class="quick-action-card clickable">
                        <div class="icon-wrapper quiz-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21.2,12.2c0.2-0.2,0.2-0.5,0-0.7l-2.2-2.2c-0.2-0.2-0.5-0.2-0.7,0l-1.1,1.1c-0.5-0.3-1-0.5-1.6-0.6l-0.2-1.4 c0-0.3-0.3-0.5-0.6-0.5h-3.2c-0.3,0-0.5,0.2-0.6,0.5l-0.2,1.4c-0.6,0.1-1.1,0.3-1.6,0.6l-1.1-1.1c-0.2-0.2-0.5-0.2-0.7,0 L5.1,9.2C4.9,9.4,4.9,9.7,5.1,9.9l1.1,1.1c-0.3,0.5-0.5,1-0.6,1.6l-1.4,0.2c-0.3,0-0.5,0.3-0.5,0.6v3.2c0,0.3,0.2,0.5,0.5,0.6 l1.4,0.2c0.1,0.6,0.3,1.1,0.6,1.6l-1.1,1.1c-0.2-0.2-0.2-0.5,0,0.7l2.2,2.2c0.2,0.2,0.5,0.2,0.7,0l1.1-1.1c0.5,0.3,1,0.5,1.6,0.6 l0.2,1.4c0,0.3,0.3,0.5,0.6,0.5h3.2c0.3,0,0.5-0.2,0.6,0.5l0.2-1.4c0.6-0.1,1.1-0.3,1.6-0.6l1.1,1.1c0.2,0.2,0.5,0.2,0.7,0 l2.2-2.2c0.2-0.2,0.2-0.5,0-0.7l-1.1-1.1c0.3-0.5,0.5-1,0.6-1.6l1.4,0.2c0.3,0,0.5-0.3,0.5-0.6v-3.2C21.8,12.5,21.5,12.2,21.2,12.2z M12,15.5c-1.9,0-3.5-1.6-3.5-3.5s1.6-3.5,3.5-3.5s3.5,1.6,3.5,3.5S13.9,15.5,12,15.5z"/></svg>
                        </div>
                        <h3>Take Quiz</h3>
                        <p>DNA Replication</p>
                    </div>
                    <div id="review-action-card" class="quick-action-card clickable">
                        <div class="icon-wrapper review-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                        </div>
                        <h3>Review</h3>
                        <p>Check your progress</p>
                    </div>
                </div>
            </section>
            <section class="page-section">
                <h2>STEM Modules</h2>
                <div class="modules-grid">
                    <div id="dna-module-card" class="module-card dna-card clickable">
                        <div class="module-card-content">
                             <div class="module-card-header">
                                <h3>DNA Replication</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="arrow-icon"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                            </div>
                            <p>Explore molecular biology through immersive 3D visualization.</p>
                        </div>
                    </div>
                    <div id="em-module-card" class="module-card electromagnetism-card clickable">
                         <div class="module-card-content">
                             <div class="module-card-header">
                                <h3>Electromagnetism</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="arrow-icon"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                            </div>
                            <p>Understand magnetic fields and electromagnetic forces.</p>
                        </div>
                    </div>
                    <div id="ohms-law-module-card" class="module-card ohms-law-card clickable">
                         <div class="module-card-content">
                             <div class="module-card-header">
                                <h3>Ohm's Law</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="arrow-icon"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                            </div>
                            <p>Simulate circuits to understand voltage and resistance.</p>
                        </div>
                    </div>
                     <div id="atomic-orbitals-module-card" class="module-card atomic-orbitals-card clickable">
                         <div class="module-card-content">
                             <div class="module-card-header">
                                <h3>Atom Model</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="arrow-icon"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                            </div>
                            <p>Visualize the probability clouds of electron orbitals.</p>
                        </div>
                    </div>
                    <div id="solar-system-module-card" class="module-card solar-system-card clickable">
                         <div class="module-card-content">
                             <div class="module-card-header">
                                <h3>Solar System</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="arrow-icon"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                            </div>
                            <p>Explore a 3D model of our solar system.</p>
                        </div>
                    </div>
                    <div id="programming-module-card" class="module-card programming-card clickable">
                        <div class="module-card-content">
                            <div class="module-card-header">
                                <h3>Java Fundamentals</h3>
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="arrow-icon"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                            </div>
                            <p>Learn the basics of programming with interactive Java examples.</p>
                        </div>
                   </div>
                </div>
            </section>

            <!-- Top Performers Section -->
            <section class="page-section">
                <h2>🏆 Top Performers</h2>
                <div class="leaderboard-container">
                    <div class="leaderboard-header">
                        <span>Rank</span>
                        <span>User</span>
                        <span>Score</span>
                    </div>
                    <div id="leaderboard-list" class="leaderboard-list">
                        <div class="leaderboard-loading">
                            <div class="spinner"></div>
                            <p>Loading leaderboard...</p>
                        </div>
                    </div>
                    <div class="leaderboard-footer">
                        <button id="refresh-leaderboard-button" class="refresh-button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                            Refresh
                        </button>
                    </div>
                </div>
            </section>
        </div>

        <!-- SIMULATIONS PAGE -->
        <div id="simulations-page" class="page">
            <div class="simulation-container">
                <div class="simulation-column">
                    <nav class="simulation-nav">
                        <button id="nav-ohms-law" class="nav-button active" aria-pressed="true">Ohm's Law</button>
                        <button id="nav-em-wave" class="nav-button" aria-pressed="false">EM Waves</button>
                        <button id="nav-3d-viewer" class="nav-button" aria-pressed="false">3D Viewer</button>
                        <button id="nav-programming" class="nav-button" aria-pressed="false">Programming</button>
                    </nav>
                    <section id="ohms-law-panel" class="simulation-card simulation-panel active" aria-labelledby="simulation-title-ohms">
                        <h2 id="simulation-title-ohms">Ohm's Law Interactive Circuit</h2>
                        <div class="circuit-container">
                             <svg viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg" aria-label="A simple circuit diagram with a battery, resistor, and a lightbulb.">
                                <path d="M 50 100 L 100 100 M 150 100 L 250 100 M 300 100 L 350 100 M 350 100 L 350 150 L 50 150 L 50 100" stroke="var(--wire-color)" stroke-width="2" fill="none"/>
                                <g transform="translate(100, 100)">
                                    <path d="M 0 0 L 15 0 M 35 0 L 50 0" stroke="var(--wire-color)" stroke-width="2"/>
                                    <path d="M 20 -15 L 20 15" stroke="var(--wire-color)" stroke-width="3"/><path d="M 30 -10 L 30 10" stroke="var(--wire-color)" stroke-width="2"/>
                                    <text x="25" y="30" text-anchor="middle" fill="var(--text-color-secondary)" font-size="12px">Battery</text>
                                </g>
                                <g transform="translate(250, 100)">
                                     <path d="M 0 0 L 5 0 L 10 -10 L 20 10 L 30 -10 L 40 10 L 45 0 L 50 0" stroke="var(--wire-color)" stroke-width="2" fill="none"/>
                                     <text x="25" y="30" text-anchor="middle" fill="var(--text-color-secondary)" font-size="12px">Resistor</text>
                                </g>
                                <g id="lightbulb">
                                    <circle id="bulb-glow" cx="350" cy="75" r="15" fill="var(--bulb-color)" />
                                    <circle cx="350" cy="75" r="15" stroke="var(--wire-color)" stroke-width="2" fill="none"/>
                                    <path d="M 342 90 L 358 90 M 345 90 L 348 100 M 355 90 L 352 100" stroke="var(--wire-color)" stroke-width="2"/>
                                </g>
                            </svg>
                        </div>
                        <div class="controls">
                            <div class="slider-group"><label for="voltage-slider">Voltage (V): <span id="voltage-value">9</span>V</label><input type="range" id="voltage-slider" name="voltage" min="1" max="24" value="9" step="0.5"></div>
                            <div class="slider-group"><label for="resistance-slider">Resistance (Ω): <span id="resistance-value">100</span>Ω</label><input type="range" id="resistance-slider" name="resistance" min="1" max="500" value="100"></div>
                        </div>
                        <div class="output"><h3>Calculated Current (I): <span id="current-value">0.09</span> A</h3></div>
                    </section>
                    <section id="em-wave-panel" class="simulation-card simulation-panel" aria-labelledby="simulation-title-em">
                        <h2 id="simulation-title-em">Electromagnetic Wave Simulator</h2>
                        <div class="wave-container">
                            <svg viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg" aria-label="An animation of an electromagnetic wave, with perpendicular electric and magnetic fields.">
                                <path d="M 20 100 L 380 100" stroke="var(--wire-color)" stroke-width="1" stroke-dasharray="4 2" fill="none"/>
                                <text x="385" y="105" fill="var(--text-color-secondary)" font-size="10">Direction</text>
                                <path id="magnetic-field-path" stroke="var(--magnetic-field-color)" stroke-width="2" fill="none" opacity="0.8"/>
                                <path id="electric-field-path" stroke="var(--electric-field-color)" stroke-width="2.5" fill="none"/>
                                <text x="10" y="20" fill="var(--electric-field-color)" font-size="12px" font-weight="bold">E</text><text x="30" y="40" fill="var(--magnetic-field-color)" font-size="12px" font-weight="bold">B</text>
                                <!-- Wavelength and propagation visual cues -->
                                <g id="wavelength-indicator" visibility="hidden">
                                    <path d="M 20 120 L 120 120" stroke="var(--orbital-color)" stroke-width="1.5" />
                                    <path d="M 20 115 L 20 125" stroke="var(--orbital-color)" stroke-width="1.5" />
                                    <path d="M 120 115 L 120 125" stroke="var(--orbital-color)" stroke-width="1.5" />
                                    <text x="65" y="115" fill="var(--orbital-color)" font-size="14px" text-anchor="middle">λ</text>
                                </g>
                                <line id="wave-crest" x1="20" y1="70" x2="20" y2="130" stroke="#f0b82f" stroke-width="2" stroke-dasharray="3 3" opacity="0.8"/>
                                <text x="375" y="115" fill="var(--text-color-secondary)" font-size="12px" text-anchor="end">c →</text>
                            </svg>
                        </div>
                        <div class="controls">
                            <div class="slider-group"><label for="frequency-slider">Frequency (f): <span id="frequency-value">5</span> Hz</label><input type="range" id="frequency-slider" name="frequency" min="1" max="20" value="5" step="1"></div>
                            <div class="slider-group"><label for="amplitude-slider">Amplitude (A): <span id="amplitude-value">40</span></label><input type="range" id="amplitude-slider" name="amplitude" min="5" max="60" value="40" step="1"></div>
                        </div>
                        <div class="output"><h3>Wavelength (λ): <span id="wavelength-value">_</span> m</h3></div>
                    </section>
                    <section id="3d-viewer-panel" class="simulation-card simulation-panel" aria-labelledby="simulation-title-3d">
                        <h2 id="simulation-title-3d">3D Model Viewer</h2>
                        <div class="model-container">
                            <canvas id="3d-canvas"></canvas>
                            <div id="3d-loader" class="loader-overlay active">
                                <div class="spinner"></div>
                                <p>Loading 3D Model...</p>
                            </div>
                        </div>
                        <div class="output">
                            <h3 id="3d-viewer-info">Click on an object to learn more about it.</h3>
                        </div>
                    </section>
                    <section id="programming-panel" class="simulation-card simulation-panel" aria-labelledby="simulation-title-prog">
                        <h2 id="simulation-title-prog">Java Fundamentals Playground</h2>
                        <div class="code-editor-layout">
                            <div class="code-editor-wrapper">
                                <label for="code-input" class="sr-only">Java Code Input</label>
                                <textarea id="code-input" class="code-editor" spellcheck="false" aria-label="Java Code Editor">
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!"); 
    }
}</textarea>
                            </div>
                            <div class="code-controls">
                                <button id="run-code-button" class="run-code-btn">
                                     <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                                    <span>Run Code</span>
                                </button>
                            </div>
                            <div class="output-wrapper">
                                <h3>Output:</h3>
                                <div id="code-output-container" class="code-output">
                                    <pre><code id="code-output">Click "Run Code" to see the output here.</code></pre>
                                    <div id="output-loader" class="loader-overlay">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                <section class="chat-card" aria-labelledby="chat-title">
                    <h2 id="chat-title">AI Teacher's Assistant</h2>
                    <div id="chat-history" class="chat-history" aria-live="polite" aria-atomic="false"><div class="message ai-message"><p>Hello! I'm your AI assistant. Ask me anything about the simulations!</p></div></div>
                    <form id="chat-form" class="chat-input-area">
                        <label for="chat-input" class="sr-only">Ask a question</label>
                        <input type="text" id="chat-input" placeholder="Ask about Ohm's Law..." required>
                        <button type="submit" id="chat-submit-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg><span class="sr-only">Send</span></button>
                    </form>
                </section>
            </div>
        </div>
        
        <!-- DETAIL PAGE -->
        <div id="detail-page" class="page">
            <header class="page-header">
                <h1 id="detail-title"></h1>
                <p>Interactive 3D Simulation</p>
            </header>
            <div id="detail-image" class="detail-image-container"></div>
            <section class="detail-content">
                <div class="info-card">
                     <div class="icon-wrapper detail-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9zm3.75 11.625a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" /></svg>
                    </div>
                    <div>
                        <h3>Interactive Controls</h3>
                        <p id="detail-description"></p>
                    </div>
                </div>
                <button id="detail-start-button" class="start-experiment-button">START EXPERIMENT</button>
            </section>
        </div>


        <!-- DASHBOARD PAGE -->
        <div id="dashboard-page" class="page">
            <header class="page-header">
                <h1>Teacher Dashboard</h1>
                <p>24 Students</p>
            </header>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-card-header">
                        <h3>82%</h3>
                        <span class="stat-change positive">+5.2%</span>
                    </div>
                    <p>Average Progress</p>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <h3>156</h3>
                        <span class="stat-change positive">+12</span>
                    </div>
                    <p>Completed Modules</p>
                </div>
                <div class="stat-card">
                    <div class="stat-card-header">
                        <h3>18</h3>
                         <span class="stat-change positive">+3</span>
                    </div>
                    <p>Active Students</p>
                </div>
                 <div class="stat-card">
                    <div class="stat-card-header">
                        <h3>24min</h3>
                         <span class="stat-change positive">+2min</span>
                    </div>
                    <p>Avg. Time/Session</p>
                </div>
            </div>
            <section class="page-section">
                <h2>Module Engagement</h2>
                <div class="engagement-list">
                    <div class="engagement-item">
                        <div class="engagement-info">
                            <p>DNA Replication</p>
                            <p>24</p>
                        </div>
                        <div class="engagement-progress-bar-container">
                             <div class="engagement-progress-bar" style="width: 95%;"></div>
                        </div>
                    </div>
                    <div class="engagement-item">
                        <div class="engagement-info">
                            <p>Electromagnetism</p>
                            <p>18</p>
                        </div>
                        <div class="engagement-progress-bar-container">
                             <div class="engagement-progress-bar" style="width: 75%;"></div>
                        </div>
                    </div>
                    <div class="engagement-item">
                        <div class="engagement-info">
                            <p>Ohm's Law</p>
                            <p>15</p>
                        </div>
                        <div class="engagement-progress-bar-container">
                             <div class="engagement-progress-bar" style="width: 60%;"></div>
                        </div>
                    </div>
                    <div class="engagement-item">
                        <div class="engagement-info">
                            <p>Java Fundamentals</p>
                            <p>9</p>
                        </div>
                        <div class="engagement-progress-bar-container">
                             <div class="engagement-progress-bar" style="width: 38%;"></div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- PROFILE PAGE -->
        <div id="profile-page" class="page">
            <header class="page-header">
                <h1>Your Profile</h1>
                <p>Your STEM journey and accomplishments</p>
            </header>

            <div class="profile-header-card">
                <div class="profile-avatar-container">
                    <img src="https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?w=400&h=400&fit=crop&crop=faces" alt="Profile picture of Sarah Johnson" class="profile-avatar" id="profile-avatar-img">
                    <button id="choose-avatar-button" class="choose-avatar-btn" aria-label="Choose from default avatars" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
                    </button>
                    <div class="loader-overlay" id="avatar-loader">
                        <div class="spinner"></div>
                    </div>
                </div>
                
                <!-- Avatar Selection Modal -->
                <div id="avatar-selector-modal" class="modal" style="display: none;">
                    <div class="modal-content avatar-selector">
                        <div class="modal-header">
                            <h3>Choose Your Avatar</h3>
                            <button class="modal-close" id="close-avatar-modal">&times;</button>
                        </div>
                        <div class="avatar-grid" id="avatar-grid">
                            <!-- Avatars will be dynamically loaded here -->
                        </div>
                    </div>
                </div>
                
                <div class="profile-info">
                    <h2 id="profile-name">Sarah Johnson</h2>
                    <p id="profile-email">Aspiring Scientist</p>
                </div>
                 <div class="profile-actions">
                    <button id="sign-out-button" class="sign-out-button">Sign Out</button>
                </div>
            </div>

            <section class="page-section">
                <h2>Learning Statistics</h2>
                <div class="profile-stats-grid">
                    <div class="profile-stat-card">
                        <div class="stat-icon-wrapper modules-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9.75h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>
                        </div>
                        <p class="stat-value">3 / 5</p>
                        <p class="stat-label">Modules Completed</p>
                    </div>
                    <div class="profile-stat-card">
                        <div class="stat-icon-wrapper time-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /></svg>
                        </div>
                        <p class="stat-value">2h 45m</p>
                        <p class="stat-label">Time Spent</p>
                    </div>
                    <div class="profile-stat-card">
                        <div class="stat-icon-wrapper streak-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z" /></svg>
                        </div>
                        <p class="stat-value">12 Days</p>
                        <p class="stat-label">Current Streak</p>
                    </div>
                     <div class="profile-stat-card">
                        <div class="stat-icon-wrapper score-icon">
                           <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z" /><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z" /></svg>
                        </div>
                        <p class="stat-value">88%</p>
                        <p class="stat-label">Average Score</p>
                    </div>
                </div>
            </section>
            
            <section class="page-section">
                <h2>Medals Earned</h2>
                <div class="achievements-grid">
                    <div class="achievement-badge earned">
                        <div class="badge-icon medal-dna">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                        </div>
                        <h4>Gene Genius</h4>
                        <p>Completed DNA Module</p>
                    </div>
                     <div class="achievement-badge earned">
                        <div class="badge-icon medal-circuits">
                           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm-4-3H5v-2h3v2zm5 0h3v-2h-3v2zm-5-7H5V5h3v2zm5 0h3V5h-3v2z"/></svg>
                        </div>
                        <h4>Master of Circuits</h4>
                        <p>Completed Ohm's Law</p>
                    </div>
                    <div class="achievement-badge earned">
                        <div class="badge-icon medal-solar">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5 1-1c.19-.19.45-.29.71-.29s.52.1.71.29l1.09 1.09c.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41L15.5 8.5c-.39-.39-1.02-.39-1.41 0l-1.09 1.09c-.19.19-.45.29-.71.29s-.52-.1-.71-.29L10.5 8.5c-.39-.39-1.02-.39-1.41 0l-4.59 4.59c-.39.39-.39 1.02 0 1.41z"/></svg>
                        </div>
                        <h4>Cosmic Explorer</h4>
                        <p>Completed Solar System</p>
                    </div>
                    <div class="achievement-badge locked">
                        <div class="badge-icon medal-em">
                           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-13H9v2h6V7zm-3 8c-2.76 0-5-2.24-5-5h2c0 1.65 1.35 3 3 3s3-1.35 3-3h2c0 2.76-2.24 5-5 5z"/></svg>
                        </div>
                        <h4>Wave Rider</h4>
                        <p>Complete EM Waves</p>
                    </div>
                     <div class="achievement-badge locked">
                        <div class="badge-icon medal-atom">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zM12 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                        </div>
                        <h4>Quantum Leap</h4>
                        <p>Complete Atom Model</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- QUIZ PAGE -->
        <div id="quiz-page" class="page">
            <header class="page-header">
                <h1 id="quiz-page-title">Test Your Knowledge</h1>
                <p id="quiz-page-subtitle">Select a topic to begin!</p>
            </header>
            <div class="quiz-container">
                <div id="quiz-topic-selection">
                    <div id="quiz-topic-grid" class="quiz-topic-grid">
                        <!-- Topic cards will be dynamically inserted here -->
                    </div>
                </div>

                <div id="quiz-active-session" class="hidden">
                    <div id="quiz-card" class="quiz-card">
                        <div id="quiz-question-container">
                            <p id="quiz-progress"></p>
                            <h2 id="quiz-question"></h2>
                            <div id="quiz-options" class="quiz-options"></div>
                            <div id="quiz-explanation" class="quiz-explanation hidden"></div>
                        </div>
                        <button id="quiz-submit-button" class="quiz-submit-button">Check Answer</button>
                    </div>
                </div>

                <div id="quiz-results" class="quiz-card hidden">
                    <h2 id="quiz-results-title">Quiz Assessment</h2>
                    <p id="quiz-score"></p>
                    <div id="quiz-review-list"></div>
                    <button id="quiz-return-home-button" class="start-experiment-button">Return to Home</button>
                </div>
            </div>
        </div>

        <!-- REVIEW PAGE -->
        <div id="review-page" class="page">
            <header class="page-header">
                <h1>Personalized Review</h1>
                <p id="review-page-subtitle">Let's reinforce some key concepts.</p>
            </header>
            <div class="review-container" style="max-width: 600px; margin: 0 auto;">
                 <!-- 1. Summary View -->
                <div id="review-summary-view" class="quiz-card">
                    <div id="review-content-container">
                        <div class="icon-wrapper review-icon" style="margin: 0 auto 1.5rem auto;">
                           <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/></svg>
                        </div>
                        <h2 id="review-topic-title" style="text-align: center;"></h2>
                        <div id="review-summary-loader" class="loader-overlay active" style="position: relative; background: transparent; min-height: 100px; display: flex; opacity: 1; pointer-events: all;">
                            <div class="spinner"></div>
                        </div>
                        <p id="review-summary" style="text-align: left; line-height: 1.6; color: var(--text-color-secondary);"></p>
                        <button id="review-start-quiz-button" class="quiz-submit-button hidden">Test My Understanding</button>
                    </div>
                </div>

                <!-- 2. Active Quiz Session -->
                <div id="review-active-session" class="quiz-card hidden">
                    <div id="review-question-container">
                        <p id="review-progress"></p>
                        <h2 id="review-question"></h2>
                        <div id="review-options" class="quiz-options"></div>
                        <div id="review-explanation" class="quiz-explanation hidden"></div>
                    </div>
                    <button id="review-submit-button" class="quiz-submit-button">Check Answer</button>
                </div>

                <!-- 3. Final Results View -->
                <div id="review-results-view" class="quiz-card hidden">
                    <h2 id="review-results-title">Review Assessment</h2>
                    <p id="review-score"></p>
                    <div id="review-review-list" class="quiz-review-list"></div>
                    <button id="review-another-topic-button" class="quiz-submit-button">Review Another Topic</button>
                    <button id="review-return-home-button" class="start-experiment-button">Return to Home</button>
                </div>
            </div>
        </div>
        
    </main>

    <button id="theme-toggle-button" class="theme-toggle-button" aria-label="Toggle theme">
        <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"></circle><path d="M12 1v2m0 18v2m8.49-16.49l-1.42 1.42M5.93 18.07l-1.42-1.42M23 12h-2m-19 0H0m16.49 8.49l-1.42-1.42M5.93 5.93l-1.42 1.42"></path></svg>
        <svg class="icon-moon hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M21.64 13.5A9.26 9.26 0 0111 2.36 9.26 9.26 0 001 12a9.26 9.26 0 0010 9.64 9.26 9.26 0 0110.64-8.14z"></path></svg>
    </button>

    <nav class="bottom-nav" style="display: none;">
        <button id="nav-home" class="nav-item active" aria-label="Home">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            <span>Home</span>
        </button>
        <button id="nav-simulations" class="nav-item" aria-label="Simulations">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20.5,11H19V7c0-1.1-0.9-2-2-2h-4c-1.1,0-2,0.9-2,2v4h-1.5c-0.8,0-1.5,0.7-1.5,1.5v4c0,0.8,0.7,1.5,1.5,1.5H11v4 c0,1.1,0.9,2,2,2h4c1.1,0,2-0.9,2-2v-4h1.5c0.8,0-1.5-0.7-1.5-1.5v-4C22,11.7,21.3,11,20.5,11z M17,7h-4v4h4V7z M17,19h-4v-4h4V19z M5,3C3.9,3,3,3.9,3,5v4h1.5C5.3,9,6,8.3,6,7.5v-4C6,3.2,5.8,3,5.5,3H5z M5,11H3v4c0,1.1,0.9,2,2,2h4 c1.1,0,2-0.9,2-2v-4H9.5C8.7,11,8,11.7,8,12.5v4C8,16.8,7.8,17,7.5,17H7V11z"/></svg>
            <span>Simulations</span>
        </button>
        <button id="nav-dashboard" class="nav-item" aria-label="Dashboard">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13,3H6C4.9,3,4,3.9,4,5v14c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V9L13,3z M12,14c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2 S13.1,14,12,14z M16,19H8v-0.6c0-0.8,0.5-1.5,1.2-1.8C10.1,16.2,11,16,12,16s1.9,0.2,2.8,0.6c0.7,0.3,1.2,1,1.2,1.8V19z"/></svg>
            <span>Dashboard</span>
        </button>
        <button id="nav-profile" class="nav-item" aria-label="Profile">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <span>Profile</span>
        </button>
    </nav>

    <script type="module" src="/index.tsx"></script>
</body>
</html>